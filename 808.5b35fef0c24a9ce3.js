"use strict";(self.webpackChunktodos=self.webpackChunktodos||[]).push([[808],{7808:(Y,Z,r)=>{r.r(Z),r.d(Z,{TodosModule:()=>g});var c=r(6895),w=r(1201),t=r(8256),u=r(2340),J=r(1135),p=r(4004),I=r(529);class T{constructor(e){this.http=e,this.todos$=new J.X([])}getTodos(){this.http.get(`${u.N.baseURL}/todo-lists`).pipe((0,p.U)(e=>e.map(n=>({...n,filter:"all"})))).subscribe(e=>{this.todos$.next(e)})}addTodo(e){this.http.post(`${u.N.baseURL}/todo-lists`,{title:e}).pipe((0,p.U)(o=>{const n=this.todos$.getValue();return[{...o.data.item,filter:"all"},...n]})).subscribe(o=>{this.todos$.next(o)})}removeTodo(e){this.http.delete(`${u.N.baseURL}/todo-lists/${e}`).pipe((0,p.U)(()=>this.todos$.getValue().filter(n=>n.id!==e))).subscribe(o=>{this.todos$.next(o)})}updateTodoTitle(e){this.http.put(`${u.N.baseURL}/todo-lists/${e.todoId}`,{title:e.title}).pipe((0,p.U)(()=>this.todos$.getValue().map(n=>n.id===e.todoId?{...n,title:e.title}:n))).subscribe(o=>{this.todos$.next(o)})}changeFilter(e){const n=this.todos$.getValue().map(i=>i.id===e.todoId?{...i,filter:e.filter}:i);this.todos$.next(n)}}T.\u0275fac=function(e){return new(e||T)(t.LFG(I.eN))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});var $=r(2730),a=r(433),H=r(9841),h=(()=>{return(s=h||(h={}))[s.active=0]="active",s[s.completed=2]="completed",h;var s})();class m{constructor(e){this.http=e,this.tasks$=new J.X({})}getTasks(e){this.http.get(`${u.N.baseURL}/todo-lists/${e}/tasks`).pipe((0,p.U)(o=>o.items)).subscribe(o=>{const n=this.tasks$.getValue();n[e]=o,this.tasks$.next(n)})}addTask(e){this.http.post(`${u.N.baseURL}/todo-lists/${e.todoId}/tasks`,{title:e.title}).pipe((0,p.U)(o=>{const n=this.tasks$.getValue(),d=[o.data.item,...n[e.todoId]];return n[e.todoId]=d,n})).subscribe(o=>this.tasks$.next(o))}removeTask(e){this.http.delete(`${u.N.baseURL}/todo-lists/${e.todoId}/tasks/${e.taskId}`).pipe((0,p.U)(o=>{const n=this.tasks$.getValue(),d=n[e.todoId].filter(l=>l.id!==e.taskId);return n[e.todoId]=d,n})).subscribe(o=>this.tasks$.next(o))}updateTask(e){this.http.put(`${u.N.baseURL}/todo-lists/${e.todoId}/tasks/${e.taskId}`,e.model).pipe((0,p.U)(()=>{const o=this.tasks$.getValue(),i=o[e.todoId].map(d=>d.id===e.taskId?{...d,...e.model}:d);return o[e.todoId]=i,o})).subscribe(o=>this.tasks$.next(o))}}function N(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"input",6),t.NdJ("ngModelChange",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.newTitle=i)})("blur",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editTitleHandler())}),t.qZA()}if(2&s){const o=t.oxw();t.Q6J("ngModel",o.newTitle)}}function S(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"p",7),t.NdJ("dblclick",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.activateEditModeHandler())}),t._uU(1),t.qZA()}if(2&s){const o=t.oxw();t.xp6(1),t.Oqu(o.task.title)}}m.\u0275fac=function(e){return new(e||m)(t.LFG(I.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});const O=function(s){return{completedTask:s}};class f{constructor(){this.removeTaskEvent=new t.vpe,this.changeTaskEvent=new t.vpe,this.taskStatusEnum=h,this.newTitle="",this.editMode=!1}removeTaskHandler(){this.removeTaskEvent.emit({todoId:this.task.todoListId,taskId:this.task.id})}activateEditModeHandler(){this.editMode=!0,this.newTitle=this.task.title}editTitleHandler(){this.changeTask({title:this.newTitle}),this.newTitle="",this.editMode=!1}changeTaskStatusHandler(e){this.changeTask({status:e.currentTarget.checked?h.completed:h.active})}changeTask(e){const o={completed:this.task.completed,deadline:this.task.deadline,description:this.task.description,priority:this.task.priority,startDate:this.task.startDate,status:this.task.status,title:this.task.title,...e};this.changeTaskEvent.emit({todoId:this.task.todoListId,taskId:this.task.id,model:o})}}function U(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"tl-task",2),t.NdJ("removeTaskEvent",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.removeTask(i))})("changeTaskEvent",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.changeTask(i))}),t.qZA()}2&s&&t.Q6J("task",e.$implicit)}f.\u0275fac=function(e){return new(e||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["tl-task"]],inputs:{task:"task"},outputs:{removeTaskEvent:"removeTaskEvent",changeTaskEvent:"changeTaskEvent"},decls:8,vars:6,consts:[[1,"box"],[1,"taskContent",3,"ngClass"],["type","checkbox",3,"checked","click"],["type","text","class","input",3,"ngModel","ngModelChange","blur",4,"ngIf","ngIfElse"],["content",""],[3,"click"],["type","text",1,"input",3,"ngModel","ngModelChange","blur"],[3,"dblclick"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("click",function(i){return o.changeTaskStatusHandler(i)}),t.qZA(),t.YNc(3,N,1,1,"input",3),t.YNc(4,S,2,1,"ng-template",null,4,t.W1O),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.removeTaskHandler()}),t._uU(7,"-"),t.qZA()()),2&e){const n=t.MAs(5);t.xp6(1),t.Q6J("ngClass",t.VKq(4,O,o.task.status===o.taskStatusEnum.completed)),t.xp6(1),t.Q6J("checked",o.task.status===o.taskStatusEnum.completed),t.xp6(1),t.Q6J("ngIf",o.editMode)("ngIfElse",n)}},dependencies:[c.mk,c.O5,a.Fj,a.JJ,a.On],styles:[".box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px}.taskContent[_ngcontent-%COMP%]{display:flex}.completedTask[_ngcontent-%COMP%]{opacity:.5;text-decoration:line-through}.input[_ngcontent-%COMP%]{width:100%;border:1px dashed black}"]});class C{constructor(e,o){this.tasksService=e,this.todosService=o,this.taskTitle=""}ngOnInit(){this.tasks$=(0,H.a)([this.tasksService.tasks$,this.todosService.todos$]).pipe((0,p.U)(e=>{let n=e[0][this.todoId];const d=e[1].find(l=>l.id===this.todoId);return"completed"===d?.filter&&(n=n.filter(l=>l.status===h.completed)),"active"===d?.filter&&(n=n.filter(l=>l.status===h.active)),n})),this.tasksService.getTasks(this.todoId)}addTaskHandler(){this.tasksService.addTask({title:this.taskTitle,todoId:this.todoId}),this.taskTitle=""}removeTask(e){this.tasksService.removeTask(e)}changeTask(e){this.tasksService.updateTask(e)}}C.\u0275fac=function(e){return new(e||C)(t.Y36(m),t.Y36(T))},C.\u0275cmp=t.Xpm({type:C,selectors:[["tl-tasks"]],inputs:{todoId:"todoId"},decls:3,vars:4,consts:[["type","text","placeholder","Add new task",1,"input",3,"ngModel","ngModelChange","keyup.enter"],[3,"task","removeTaskEvent","changeTaskEvent",4,"ngFor","ngForOf"],[3,"task","removeTaskEvent","changeTaskEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"input",0),t.NdJ("ngModelChange",function(i){return o.taskTitle=i})("keyup.enter",function(){return o.addTaskHandler()}),t.qZA(),t.YNc(1,U,1,1,"tl-task",1),t.ALo(2,"async")),2&e&&(t.Q6J("ngModel",o.taskTitle),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,o.tasks$)))},dependencies:[c.sg,a.Fj,a.JJ,a.On,f,c.Ov],styles:[".input[_ngcontent-%COMP%]{border:1px solid black;margin-bottom:10px;width:100%;box-sizing:border-box}"]});const E=function(s){return{active:s}};class x{constructor(){this.changeFilterEvent=new t.vpe}changeFilterHandler(e){this.changeFilterEvent.emit(e)}}x.\u0275fac=function(e){return new(e||x)},x.\u0275cmp=t.Xpm({type:x,selectors:[["tl-todo-filters"]],inputs:{filter:"filter"},outputs:{changeFilterEvent:"changeFilterEvent"},decls:7,vars:9,consts:[[1,"box"],[3,"ngClass","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.changeFilterHandler("active")}),t._uU(2,"Active"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.changeFilterHandler("completed")}),t._uU(4,"Completed"),t.qZA(),t.TgZ(5,"button",1),t.NdJ("click",function(){return o.changeFilterHandler("all")}),t._uU(6,"All"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(3,E,"active"===o.filter)),t.xp6(2),t.Q6J("ngClass",t.VKq(5,E,"completed"===o.filter)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,E,"all"===o.filter)))},dependencies:[c.mk],styles:[".box[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.active[_ngcontent-%COMP%]{background-color:#44a84c}"]});class b{}function q(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"input",8),t.NdJ("ngModelChange",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.newTitle=i)})("blur",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.editTitleHandler())}),t.qZA()}if(2&s){const o=t.oxw();t.Q6J("ngModel",o.newTitle)}}function G(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"b",9),t.NdJ("dblclick",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.activateEditModeHandler())}),t._uU(1),t.qZA()}if(2&s){const o=t.oxw();t.xp6(1),t.hij(" ",o.todo.title," ")}}b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=t.Xpm({type:b,selectors:[["tl-todo-footer"]],inputs:{addedDate:"addedDate"},decls:3,vars:3,consts:[[1,"box"]],template:function(e,o){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,o.addedDate)))},dependencies:[c.uU],styles:[".box[_ngcontent-%COMP%]{border-top:2px solid black;padding-top:10px}"]});class M{constructor(e){this.todosService=e,this.removeTodoEvent=new t.vpe,this.editTodoEvent=new t.vpe,this.isEditMode=!1,this.newTitle=""}removeTodoHandler(){this.removeTodoEvent.emit(this.todo.id)}activateEditModeHandler(){this.newTitle=this.todo.title,this.isEditMode=!0}editTitleHandler(){this.isEditMode=!1,this.editTodoEvent.emit({todoId:this.todo.id,title:this.newTitle})}changeFilter(e){this.todosService.changeFilter({filter:e,todoId:this.todo.id})}}function L(s,e){if(1&s){const o=t.EpF();t.TgZ(0,"tl-todo",6),t.NdJ("removeTodoEvent",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.removeTodo(i))})("editTodoEvent",function(i){t.CHM(o);const d=t.oxw();return t.KtG(d.editTodo(i))}),t.qZA()}2&s&&t.Q6J("todo",e.$implicit)}M.\u0275fac=function(e){return new(e||M)(t.Y36(T))},M.\u0275cmp=t.Xpm({type:M,selectors:[["tl-todo"]],inputs:{todo:"todo"},outputs:{removeTodoEvent:"removeTodoEvent",editTodoEvent:"editTodoEvent"},decls:10,vars:5,consts:[[1,"box"],[1,"todoHeader"],["type","text",3,"ngModel","ngModelChange","blur",4,"ngIf","ngIfElse"],["content",""],[3,"click"],[3,"todoId"],[3,"filter","changeFilterEvent"],[3,"addedDate"],["type","text",3,"ngModel","ngModelChange","blur"],[3,"dblclick"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,q,1,1,"input",2),t.YNc(3,G,2,1,"ng-template",null,3,t.W1O),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.removeTodoHandler()}),t._uU(6,"delete"),t.qZA()(),t._UZ(7,"tl-tasks",5),t.TgZ(8,"tl-todo-filters",6),t.NdJ("changeFilterEvent",function(i){return o.changeFilter(i)}),t.qZA(),t._UZ(9,"tl-todo-footer",7),t.qZA()),2&e){const n=t.MAs(4);t.xp6(2),t.Q6J("ngIf",o.isEditMode)("ngIfElse",n),t.xp6(5),t.Q6J("todoId",o.todo.id),t.xp6(1),t.Q6J("filter",o.todo.filter),t.xp6(1),t.Q6J("addedDate",o.todo.addedDate)}},dependencies:[c.O5,a.Fj,a.JJ,a.On,C,x,b],styles:[".box[_ngcontent-%COMP%]{border:1px solid black;padding:10px;margin:10px;width:200px;display:flex;flex-direction:column}.todoHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px;align-items:center}"]});class y{constructor(e,o){this.todosService=e,this.authService=o,this.todoTitle=""}ngOnInit(){this.todos$=this.todosService.todos$,this.todosService.getTodos()}addTodoHandler(){this.todosService.addTodo(this.todoTitle),this.todoTitle=""}removeTodo(e){this.todosService.removeTodo(e)}editTodo(e){this.todosService.updateTodoTitle(e)}logoutHandler(){this.authService.logout()}}function A(s,e,o,n,i,d,l){try{var F=s[d](l),v=F.value}catch(K){return void o(K)}F.done?e(v):Promise.resolve(v).then(n,i)}y.\u0275fac=function(e){return new(e||y)(t.Y36(T),t.Y36($.e))},y.\u0275cmp=t.Xpm({type:y,selectors:[["tl-todos"]],decls:12,vars:4,consts:[[1,"todos-header"],[3,"click"],[1,"todos-input"],["type","text","placeholder","Add new Todo",1,"input",3,"ngModel","ngModelChange"],[1,"todosBox"],[3,"todo","removeTodoEvent","editTodoEvent",4,"ngFor","ngForOf"],[3,"todo","removeTodoEvent","editTodoEvent"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Angular Todo"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.logoutHandler()}),t._uU(4,"logout"),t.qZA()(),t.TgZ(5,"div",2)(6,"input",3),t.NdJ("ngModelChange",function(i){return o.todoTitle=i}),t.qZA(),t.TgZ(7,"button",1),t.NdJ("click",function(){return o.addTodoHandler()}),t._uU(8,"+"),t.qZA()(),t.TgZ(9,"div",4),t.YNc(10,L,1,1,"tl-todo",5),t.ALo(11,"async"),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngModel",o.todoTitle),t.xp6(4),t.Q6J("ngForOf",t.lcZ(11,2,o.todos$)))},dependencies:[c.sg,a.Fj,a.JJ,a.On,M,c.Ov],styles:[".todos-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.todos-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px;gap:10px}.input[_ngcontent-%COMP%]{width:300px;border:2px solid black;padding:10px}.todosBox[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:30px}"]});class _{constructor(e,o){this.authService=e,this.router=o}canActivate(e,o){var n=this;return function Q(s){return function(){var e=this,o=arguments;return new Promise(function(n,i){var d=s.apply(e,o);function l(v){A(d,n,i,l,F,"next",v)}function F(v){A(d,n,i,l,F,"throw",v)}l(void 0)})}}(function*(){yield n.authService.authRequest;const i=n.authService.isAuth;return i||n.router.navigate(["/login"]),i})()}}_.\u0275fac=function(e){return new(e||_)(t.LFG($.e),t.LFG(w.F0))},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});const P=[{path:"",component:y,pathMatch:"full",canActivate:[_]}];class k{}k.\u0275fac=function(e){return new(e||k)},k.\u0275mod=t.oAB({type:k}),k.\u0275inj=t.cJS({imports:[w.Bz.forChild(P),w.Bz]});class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[c.ez,k,a.u5]})}}]);